<div class="dialog-container dialog-container-pw">
    <div class="auth-form-container">
        <h1>Passwort zurücksetzen</h1>
    </div>
    @if (linkError) {
    <p style="color: red;">{{ linkError }}</p>
    }
    @if (!linkError && emailForReset) {
    <p>Passwort zurücksetzen für: <b>{{ emailForReset }}</b></p>
    }
    <form class="auth-form-container" #form="ngForm" (ngSubmit)="updatePw()">
        <div class="form-input">
            <img src="assets/icons/login/lock_passive.svg" alt="" class="form-input-icon">
            <input name="newPassword" type="password" placeholder="Neues Passwort" [(ngModel)]="newPassword" required>
        </div>
        <div class="form-input">
            <img src="assets/icons/login/lock_passive.svg" alt="" class="form-input-icon">
            <input name="newPasswordRepeat" type="password" placeholder="Neues Passwort bestätigen"
                [(ngModel)]="newPasswordRepeat" required>
            @if (!pwIdentical && newPassword !== '' && newPasswordRepeat !== '') {
            <span class="error-message">Die Eingaben stimmen nicht überein.</span>
            }
        </div>
        <button type="submit" class="submit-button"
            [class]="form.valid && pwIdentical && !!oobCode ? 'btn-enabled' : 'btn-disabled'"
            [disabled]="form.invalid || !pwIdentical || !oobCode || loading" style="margin-left: auto;">
            <span>{{ loading ? 'Bitte warten...' : 'Passwort ändern' }}</span>
        </button>
    </form>
    <img src="assets/icons/global/arrow_back.svg" alt="arrow_back" class="arrow-back" routerLink="/auth">
</div>