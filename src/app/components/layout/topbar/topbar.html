<section class="header">
    <div class="top-bar">
        <div class="topbar">
            <img src="/assets/icons/global/logo-header.svg" alt="logo">
        </div>
        <div class="search-bar">
            <input type="text" id="name" name="name" placeholder="Devspace durchsuchen" class="search-inputs"
                [(ngModel)]="searchQuery" (input)="onSearchInput()" (focus)="onSearchFocus()" (blur)="onSearchBlur()">
            <img *ngIf="searchQuery.length > 0" src="/assets/icons/global/close.svg" alt="clear"
                class="search-icon-clear" (click)="clearSearch()">
            <img src="/assets/icons/global/search.svg" alt="search" class="search-icon-right">
        </div>
        <div class="profil" (click)="toggleDropdownMenu($event)">
            <h1>Frederik Beck</h1>
            <div class="profil-image">
                <img src="/assets/icons/global/Avatar.svg" alt="avatar-profil">
                <img src="/assets/icons/global/Online.svg" alt="avatar-online-icon" class="online-icon">
            </div>
            <img src="/assets/icons/global/keyboard_arrow_down.svg" (click)="toggleDropdownMenu($event)"
                alt="arrow-drop-down">

            <div class="dropdown-menu" [class.show]="isDropdownMenuOpen">
                <div class="menu-name" (click)="openProfilModal()">Profil</div>
                <div class="menu-name" (click)="onLogout($event)">Log out</div>
            </div>

            <div class="profil-modal" [class.show]="isProfilModalOpen" (click)="$event.stopPropagation()">
                <div class="modal-header">
                    <h2>Profil</h2>
                    <div class="close-icon-wrapper" (click)="closeProfilModal()">
                        <img src="/assets/icons/global/close.svg" alt="close" class="close-icon">
                    </div>
                </div>

                <div class="modal-content">
                    <div class="avatar-large">
                        <img src="/assets/icons/global/Avatar.svg" alt="avatar-profil">
                    </div>

                    <div class="profil-info">
                        <div class="profil-info-details">
                            <h3>Frederik Beck</h3>
                            <button class="edit-button" (click)="openProfilEditModal()">Bearbeiten</button>
                        </div>

                        <div class="status">
                            <span class="status-dot"></span>
                            <span class="status-text">Aktive</span>
                        </div>
                    </div>

                    <div class="email-section">
                        <img src="/assets/icons/login/mail_active.svg" alt="email" class="email-icon">
                        <div class="email-info">
                            <p class="email-label">E-Mail-Adresse</p>
                            <p class="email-address">fred.beck@email.com</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="profil-edit-modal" [class.show]="isProfilEditModalOpen" (click)="$event.stopPropagation()">
                <div class="modal-header">
                    <h2>Dein Profil bearbeiten</h2>
                    <div class="close-icon-wrapper" (click)="closeProfilEditModal()">
                        <img src="/assets/icons/global/close.svg" alt="close" class="close-icon">
                    </div>
                </div>

                <div class="modal-content">
                    <div class="avatar-large">
                        <img src="/assets/icons/global/Avatar.svg" alt="avatar-profil">
                    </div>

                    <div class="form-section">
                        <div class="circle-profil-name">
                            <img class="" src="/assets/icons/global/account_circle.svg" alt="">
                            <label>Vollst√§ndiger Name</label>
                        </div>
                        <input type="text" value="Frederik Beck" class="input-field">
                    </div>

                    <div class="modal-actions">
                        <button class="cancel-btn" (click)="closeProfilEditModal()">Abbrechen</button>
                        <button class="save-btn">Speichern</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="profil-modal-overlay" [class.show]="isProfilModalOpen" (click)="closeProfilModalOnly()"></div>

<div class="profil-modal-overlay" [class.show]="isProfilEditModalOpen" (click)="closeProfilEditModalOnly()"></div>